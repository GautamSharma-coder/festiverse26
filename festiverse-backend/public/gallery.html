<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gallery | Festiverse'26</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&family=Syne:wght@400;600;700;800&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg-dark: #050505;
      --accent: #ccff00;
    }

    body {
      font-family: 'Space Grotesk', sans-serif;
      background-color: var(--bg-dark);
      color: white;
    }

    h1,
    h2,
    h3,
    .font-display {
      font-family: 'Syne', sans-serif;
    }

    .texture-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.07'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 50;
    }

    /* Masonry Grid */
    .gallery-grid {
      column-count: 1;
      column-gap: 1.5rem;
    }

    @media (min-width: 640px) {
      .gallery-grid {
        column-count: 2;
      }
    }

    @media (min-width: 1024px) {
      .gallery-grid {
        column-count: 3;
      }
    }

    .gallery-item {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      position: relative;
      border-radius: 1rem;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .gallery-img {
      width: 100%;
      display: block;
      filter: grayscale(100%);
      transition: all 0.5s ease;
    }

    .gallery-item:hover .gallery-img {
      filter: grayscale(0%);
      transform: scale(1.05);
    }

    .overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
      opacity: 0;
      transition: opacity 0.3s;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 1.5rem;
    }

    .gallery-item:hover .overlay {
      opacity: 1;
    }
  </style>
</head>

<body class="antialiased">
  <div class="texture-overlay"></div>

  <nav class="fixed top-0 w-full z-40 px-6 py-6 flex justify-between items-center mix-blend-difference">
    <a href="index.html" class="font-display font-bold text-xl tracking-tighter text-white">
      FESTIVERSE<span class="text-[#ccff00]">.</span>
    </a>
    <a href="register.html"
      class="px-6 py-2 border border-white/20 rounded-full text-sm font-bold uppercase text-white hover:bg-[#ccff00] hover:border-[#ccff00] hover:text-black transition-all">Get
      Passes</a>
  </nav>

  <main class="pt-32 pb-20 px-6 max-w-7xl mx-auto relative z-10">

    <div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-6">
      <div>
        <span class="text-[#ccff00] font-bold text-xs tracking-[0.3em] uppercase">Archive: 2025</span>
        <h2 class="font-display text-5xl md:text-7xl font-bold text-white mt-4">VISUAL ECHOES</h2>
      </div>
      <button onclick="filterGallery('All')"
        class="filter-btn px-4 py-2 border border-[#ccff00] bg-[#ccff00] text-black text-xs font-bold uppercase rounded-full">All</button>
      <button onclick="filterGallery('Concert')"
        class="filter-btn px-4 py-2 border border-white/20 text-white hover:bg-white/10 text-xs font-bold uppercase rounded-full transition">Concert</button>
      <button onclick="filterGallery('Competition')"
        class="filter-btn px-4 py-2 border border-white/20 text-white hover:bg-white/10 text-xs font-bold uppercase rounded-full transition">Competition</button>
    </div>

    </div>

    <div class="gallery-grid" id="gallery-container">
      <!-- Dynamic Content -->
    </div>


  </main>

  <footer class="py-10 border-t border-white/10 text-center relative z-10 bg-black">
    <p class="font-display text-xs tracking-widest text-gray-600 uppercase">
      Captured by Media Team // Festiverse'26
    </p>
  </footer>

  <script>
    let allImages = [];

    async function loadGallery() {
      try {
        const res = await fetch('/api/images');
        allImages = await res.json();
        renderGallery(allImages);
      } catch (err) { console.error("Gallery Load Error:", err); }
    }

    function renderGallery(images) {
      const container = document.getElementById('gallery-container');
      container.innerHTML = '';

      if (images.length === 0) {
        container.innerHTML = '<p class="text-center text-slate-500 col-span-full">No images found.</p>';
        return;
      }

      images.forEach(img => {
        const item = `
            <div class="gallery-item group">
                <img src="${img.url}" class="gallery-img" alt="${img.title}">
                <div class="overlay">
                    <h3 class="text-xl font-bold font-display text-white">${img.title}</h3>
                    <p class="text-xs text-[#ccff00] uppercase tracking-widest mt-1">${img.category}</p>
                </div>
            </div>`;
        container.innerHTML += item;
      });
    }

    function filterGallery(category) {
      // Update Buttons
      document.querySelectorAll('.filter-btn').forEach(btn => {
        if (btn.innerText.toUpperCase() === category.toUpperCase()) {
          btn.className = "filter-btn px-4 py-2 border border-[#ccff00] bg-[#ccff00] text-black text-xs font-bold uppercase rounded-full transition";
        } else {
          btn.className = "filter-btn px-4 py-2 border border-white/20 text-white hover:bg-white/10 text-xs font-bold uppercase rounded-full transition";
        }
      });

      if (category === 'All') {
        renderGallery(allImages);
      } else {
        const filtered = allImages.filter(img => img.category === category);
        renderGallery(filtered);
      }
    }

    window.onload = loadGallery;
  </script>
</body>

</html>